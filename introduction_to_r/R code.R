
#### Help ---------------------------------------------------------------------------------------------------------------------------------

# if you know the function name, but not how to use it ==> ?funname or help(funname)
?chisq.test
help(chisq.test)

# if you know what you want to do, but don't know how to solve it ==> ?topic
??chisquare



#### R As A Calculator---------------------------------------------------------------------------------------------------------------------

### + Operators ----------------------------------------------------------------------------------------------------------------------------

## + + Arithmetic --------------------------------------------------------------------------------------------------------------------------
1 - 1
2 * 4
7 + 12
5 / 2

## + + Logical -----------------------------------------------------------------------------------------------------------------------------


## + + Conditional -------------------------------------------------------------------------------------------------------------------------


### + Built-In Constants And Functions -----------------------------------------------------------------------------------------------------

## + + Mathematics -------------------------------------------------------------------------------------------------------------------------


## + + Statistics --------------------------------------------------------------------------------------------------------------------------


## + + Matrices ----------------------------------------------------------------------------------------------------------------------------


#### Variables ----------------------------------------------------------------------------------------------------------------------------

# Assignment: varname <- value. The more common equal sign is used to pass values to arguments in function calls
x <- 2
x
x - 2
(x <- x - 2)
y <- x
y

#### + Environment, Workspace -------------------------------------------------------------------------------------------------------------

# 
getwd()

#  (NOTE: always use forward slash, even in Windows - double back slash is not advised)
setwd('setup_cloud_machine_data_science/')
setwd('introduction_to_r/')

# 
rm(objname)
rm(list = ls())


#### Packages -----------------------------------------------------------------------------------------------------------------------------
install.packages('readr')

pkgs <- c('data.table', 'dplyr', 'gapminder', 'ggplot2', 'jsonlite', 'nycflights13', 'readr', 'readxl', 'sqldf')
install.packages(pkgs)
lapply(pkgs, require, char = TRUE)


#### Data Types [atomics] -----------------------------------------------------------------------------------------------------------------

### + logical (boolean) -------------------------------------------------------------------------------------------------------------------


### + character (string) ------------------------------------------------------------------------------------------------------------------


### + numeric -----------------------------------------------------------------------------------------------------------------------------



### + complex -----------------------------------------------------------------------------------------------------------------------------


### + raw ---------------------------------------------------------------------------------------------------------------------------------


#### Data Structures ----------------------------------------------------------------------------------------------------------------------

### + Vector ------------------------------------------------------------------------------------------------------------------------------
x <- c(12, 13, 34, 4, 6, 87)
x[3]
x[1:2]
LETTERS[1:5]
letters[1:5]
month.abb[10:12]
month.name[10:12]

# vectorization
x + 2
y <- c(2, 3, 4, 7, 18)
x + y

## + + Sequences
1:10
seq(1, 10)



## + + Repetitions


          
### + Matrix ------------------------------------------------------------------------------------------------------------------------------

my_vector <- 1:10
my_vector
dim(my_vector) <- c(2, 5)
my_vector
my_matrix <- matrix(my_vector, nrow = 2)
my_matrix
identical(my_vector, my_matrix)
my_matrix <- matrix(my_vector, nrow = 2, byrow = TRUE)
my_matrix
identical(my_vector, my_matrix)


### + Array -------------------------------------------------------------------------------------------------------------------------------


### + Dataframe ---------------------------------------------------------------------------------------------------------------------------


### + List --------------------------------------------------------------------------------------------------------------------------------


### + Factor ------------------------------------------------------------------------------------------------------------------------------


# \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\
#### Data I/O -----------------------------------------------------------------------------------------------------------------------------

### + Keyboard ----------------------------------------------------------------------------------------------------------------------------
        

### + Text Files --------------------------------------------------------------------------------------------------------------------------

        
### + Spreadsheets ------------------------------------------------------------------------------------------------------------------------



### + Other Statistical Packages ----------------------------------------------------------------------------------------------------------


### + Databases ---------------------------------------------------------------------------------------------------------------------------


## + + SQLLite ----------------------------------------------------------------------------------------------------------------------------



## + + MySQL ------------------------------------------------------------------------------------------------------------------------------



## + + Postgres ---------------------------------------------------------------------------------------------------------------------------




### + Web Scraping ------------------------------------------------------------------------------------------------------------------------


        
### + Other Formats -----------------------------------------------------------------------------------------------------------------------


### + Built-In Datasets -------------------------------------------------------------------------------------------------------------------



### Data Manipulation ---------------------------------------------------------------------------------------------------------------------

### + Strings -----------------------------------------------------------------------------------------------------------------------------


### + Date and Time -----------------------------------------------------------------------------------------------------------------------


### + Regular Expressions -----------------------------------------------------------------------------------------------------------------



### Data Wrangling ------------------------------------------------------------------------------------------------------------------------
        
### + Select columns ----------------------------------------------------------------------------------------------------------------------


### + Filter Rows -------------------------------------------------------------------------------------------------------------------------


### + Add/Drop Column ---------------------------------------------------------------------------------------------------------------------


### + Recode / Transform Variable ---------------------------------------------------------------------------------------------------------


### + Merge datasets ----------------------------------------------------------------------------------------------------------------------



### Data Summary --------------------------------------------------------------------------------------------------------------------------

### + Univariate --------------------------------------------------------------------------------------------------------------------------

### + Multivariate ------------------------------------------------------------------------------------------------------------------------


### Data Display --------------------------------------------------------------------------------------------------------------------------
        

### Data Visualization --------------------------------------------------------------------------------------------------------------------

### + Univariate --------------------------------------------------------------------------------------------------------------------------

## + + Bar plot ---------------------------------------------------------------------------------------------------------------------------


## + + Pie chart --------------------------------------------------------------------------------------------------------------------------


## + + Dot plot ---------------------------------------------------------------------------------------------------------------------------


## + + Pyramid ----------------------------------------------------------------------------------------------------------------------------


## + + Histogram --------------------------------------------------------------------------------------------------------------------------


## + + Area Chart -------------------------------------------------------------------------------------------------------------------------


## + + Density plot -----------------------------------------------------------------------------------------------------------------------


## + + Boxplot ----------------------------------------------------------------------------------------------------------------------------


## + + Violin Plot ------------------------------------------------------------------------------------------------------------------------


### + Bivariate ---------------------------------------------------------------------------------------------------------------------------

## + + Scatterplot ------------------------------------------------------------------------------------------------------------------------


## + + Bubble Chart -----------------------------------------------------------------------------------------------------------------------


## + + Highlight --------------------------------------------------------------------------------------------------------------------------


## + + Mosaic Plot ------------------------------------------------------------------------------------------------------------------------


### + Multivariate ------------------------------------------------------------------------------------------------------------------------

## + + Scatterplot Matrix -----------------------------------------------------------------------------------------------------------------


## + + Ridges -----------------------------------------------------------------------------------------------------------------------------


## + + Radar Chart ------------------------------------------------------------------------------------------------------------------------


## + + Correlogram ------------------------------------------------------------------------------------------------------------------------


## + + Sankey Diagram ---------------------------------------------------------------------------------------------------------------------


## + + Parallel Coordinates ---------------------------------------------------------------------------------------------------------------


## + + Parallel Sets ----------------------------------------------------------------------------------------------------------------------


## + + Chord Diagram ----------------------------------------------------------------------------------------------------------------------


## + + Tree Diagram -----------------------------------------------------------------------------------------------------------------------


## + + Network Diagram --------------------------------------------------------------------------------------------------------------------


## + + Treemap ----------------------------------------------------------------------------------------------------------------------------


## + + Circle Packing ---------------------------------------------------------------------------------------------------------------------


## + + Wordcloud --------------------------------------------------------------------------------------------------------------------------



### + Time / Sequences --------------------------------------------------------------------------------------------------------------------

## + + Line chart -------------------------------------------------------------------------------------------------------------------------


## + + Streamgraph ------------------------------------------------------------------------------------------------------------------------


### + Spatial -----------------------------------------------------------------------------------------------------------------------------

## + + Location ---------------------------------------------------------------------------------------------------------------------------


## + + Proportional Symbol ----------------------------------------------------------------------------------------------------------------


## + + Choropleth -------------------------------------------------------------------------------------------------------------------------


## + + Hexbin -----------------------------------------------------------------------------------------------------------------------------


## + + Cartogram --------------------------------------------------------------------------------------------------------------------------


## + + Voronoi ----------------------------------------------------------------------------------------------------------------------------


## + + Connections ------------------------------------------------------------------------------------------------------------------------


## + + Flows ------------------------------------------------------------------------------------------------------------------------------



### Data Modeling And Learning ------------------------------------------------------------------------------------------------------------

### + Probability And Simulation ----------------------------------------------------------------------------------------------------------



### + Statistical Inference ---------------------------------------------------------------------------------------------------------------

## + + Estimation -------------------------------------------------------------------------------------------------------------------------


## + + Hypothesis Testing -----------------------------------------------------------------------------------------------------------------


### + Classification ----------------------------------------------------------------------------------------------------------------------

## + + kNN --------------------------------------------------------------------------------------------------------------------------------


## + + Decision Trees ---------------------------------------------------------------------------------------------------------------------


## + + Random Forest ----------------------------------------------------------------------------------------------------------------------


### + Regression --------------------------------------------------------------------------------------------------------------------------

## + +  -----------------------------------------------------------------------------------------------------------------------------------

## + +  -----------------------------------------------------------------------------------------------------------------------------------
        
### + Features Engineering ----------------------------------------------------------------------------------------------------------------

## + + Attributes Selection ---------------------------------------------------------------------------------------------------------------


## + + Domain Reduction -------------------------------------------------------------------------------------------------------------------


### + Clustering --------------------------------------------------------------------------------------------------------------------------


### + Forecasting -------------------------------------------------------------------------------------------------------------------------


### + Survival Analysis -------------------------------------------------------------------------------------------------------------------


### + Meta Analysis -----------------------------------------------------------------------------------------------------------------------


### +  ------------------------------------------------------------------------------------------------------------------------------------


## + + Training ---------------------------------------------------------------------------------------------------------------------------


## + + Evaluation, Cross Validation -------------------------------------------------------------------------------------------------------


## + + Hyperparameter Tuning --------------------------------------------------------------------------------------------------------------


## + + Regularization ---------------------------------------------------------------------------------------------------------------------


## + +  ------------------------------------------------------------------------------------------------------------------------------




#### USE CASES ----------------------------------------------------------------------------------------------------------------------------

### + Data Wrangling and Display ----------------------------------------------------------------------------------------------------------

## + + Pct of petitions signatures vs electors by Parliamentary Constituency --------------------------------------------------------------

# load packages
pkgs <- c('jsonlite', 'readxl')
lapply(pkgs, require, char = TRUE)

# set placeholder
tmp.xls <- tempfile(fileext = ".xls")

# download election data file and load it in the previous object
download.file(
    'https://www.ons.gov.uk/file?uri=/peoplepopulationandcommunity/elections/electoralregistration/datasets/electoralstatisticsforuk/2017unformatted/elec5dt2unformattedelectoralstatisticsuk2017.xls',
    destfile = tmp.xls,
    mode = 'wb'
)

# read spreadhsheet
electors <- read_xls(tmp.xls, sheet = 5)

# select relevant columns
electors <- electors[, c(1, 2, 5)]

# release object
unlink(tmp.xls)

# download petition data: go here https://petition.parliament.uk/petitions/ and find the id 
pet_id <- ''
y <- fromJSON(paste0('https://petition.parliament.uk/petitions/', pet_id, '.json'))

### + Data Display using DT datatable -----------------------------------------------------------------------------------------------------



### + Data Display using formattable ------------------------------------------------------------------------------------------------------



### + Data Display using handsontable -----------------------------------------------------------------------------------------------------





